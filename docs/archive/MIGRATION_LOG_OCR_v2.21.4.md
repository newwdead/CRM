# üéØ –ú–∏–≥—Ä–∞—Ü–∏—è OCR Editor –∫ –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ

**–î–∞—Ç–∞:** 2025-10-22  
**–í–µ—Ä—Å–∏—è:** 2.21.4  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ (–§–∞–∑–∞ 1)

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. –°–æ–∑–¥–∞–Ω–∞ –º–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
frontend/src/modules/ocr/
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îî‚îÄ‚îÄ ocrApi.js                 (67 —Å—Ç—Ä–æ–∫)   - API –≤—ã–∑–æ–≤—ã
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ useOCRBlocks.js          (167 —Å—Ç—Ä–æ–∫)  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–ª–æ–∫–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ useBlockDrag.js          (67 —Å—Ç—Ä–æ–∫)   - –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ
‚îÇ   ‚îî‚îÄ‚îÄ useBlockResize.js        (91 —Å—Ç—Ä–æ–∫)   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ ImageViewer.js           (88 —Å—Ç—Ä–æ–∫)   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ BlockCanvas.js           (126 —Å—Ç—Ä–æ–∫)  - –ë–ª–æ–∫–∏ –Ω–∞ canvas
‚îÇ   ‚îú‚îÄ‚îÄ BlockToolbar.js          (165 —Å—Ç—Ä–æ–∫)  - –ü–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ BlocksList.js            (143 —Å—Ç—Ä–æ–∫)  - –°–ø–∏—Å–æ–∫ –±–ª–æ–∫–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ OCREditorContainer.js    (405 —Å—Ç—Ä–æ–∫)  - –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
‚îî‚îÄ‚îÄ index.js                      (10 —Å—Ç—Ä–æ–∫)   - –≠–∫—Å–ø–æ—Ä—Ç –º–æ–¥—É–ª—è
```

**–í—Å–µ–≥–æ:** 10 —Ñ–∞–π–ª–æ–≤, 1329 —Å—Ç—Ä–æ–∫

### 2. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ |
|---------|----|----- |
| **–§–∞–π–ª–æ–≤** | 1 | 10 |
| **–°—Ç—Ä–æ–∫** | 1150 | 1329 |
| **–ú–∞–∫—Å. —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞** | 1150 | 405 |
| **–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å** | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |
| **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** | ‚ùå –°–ª–æ–∂–Ω–æ | ‚úÖ –õ–µ–≥–∫–æ |

### 3. –û–±–Ω–æ–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã

- `frontend/src/components/ContactList.js`
- `frontend/src/components/pages/ContactPage.js`

```javascript
// –ë—ã–ª–æ:
import OCREditorWithBlocks from './OCREditorWithBlocks';

// –°—Ç–∞–ª–æ:
import { OCREditorContainer } from '../modules/ocr';
```

---

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å
‚úÖ –ö–∞–∂–¥—ã–π —Ö—É–∫ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ  
‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ drag –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ resize  
‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ API –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ UI

### –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```javascript
// –õ—é–±–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö—É–∫–∏:
import { useOCRBlocks, useBlockDrag } from 'modules/ocr';

const { blocks, updateBlock } = useOCRBlocks(contact);
const { handleDragStart } = useBlockDrag(blocks, updateBlock);
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```javascript
// –¢–µ—Å—Ç–∏—Ä—É–µ–º –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ:
test('useBlockDrag updates block position', () => {
  const { result } = renderHook(() => useBlockDrag(...));
  // ...
});
```

### –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤
- –ë—ã–ª–æ: 1 —Ñ–∞–π–ª √ó 1150 —Å—Ç—Ä–æ–∫ = —Å–ª–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å
- –°—Ç–∞–ª–æ: 10 —Ñ–∞–π–ª–æ–≤ √ó max 405 —Å—Ç—Ä–æ–∫ = –ª–µ–≥–∫–æ —á–∏—Ç–∞—Ç—å

---

## üìä –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

### ‚úÖ –ß—Ç–æ –ø–æ–ª—É—á–∏–ª–∏

1. **–ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**
   - API —Å–ª–æ–π –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω (`api/ocrApi.js`)
   - –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤ —Ö—É–∫–∞—Ö (`hooks/`)
   - UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã (`components/`)

2. **–ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —Ö—É–∫–∏**
   - `useOCRBlocks` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏
   - `useBlockDrag` - –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ
   - `useBlockResize` - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞

3. **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**
   - `ImageViewer` - –ø–æ–∫–∞–∑ –∫–∞—Ä—Ç–∏–Ω–∫–∏
   - `BlockCanvas` - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–ª–æ–∫–æ–≤
   - `BlockToolbar` - –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
   - `BlocksList` - —Å–ø–∏—Å–æ–∫ –±–ª–æ–∫–æ–≤

### ‚úÖ –ß—Ç–æ —É–ª—É—á—à–∏–ª–æ—Å—å

**–î–æ:**
```javascript
// OCREditorWithBlocks.js (1150 —Å—Ç—Ä–æ–∫)
const [blocks, setBlocks] = useState(null);
const [dragging, setDragging] = useState(null);
const [resizing, setResizing] = useState(null);
// ... 15+ useState
// ... 30+ —Ñ—É–Ω–∫—Ü–∏–π
// ... –≤—Å—è –ª–æ–≥–∏–∫–∞ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
```

**–ü–æ—Å–ª–µ:**
```javascript
// OCREditorContainer.js (405 —Å—Ç—Ä–æ–∫)
const { blocks, updateBlock } = useOCRBlocks(contact);     // 167 —Å—Ç—Ä–æ–∫
const { handleDragStart } = useBlockDrag(blocks, ...);     // 67 —Å—Ç—Ä–æ–∫
const { handleResizeStart } = useBlockResize(blocks, ...); // 91 —Å—Ç—Ä–æ–∫

// –õ–æ–≥–∏–∫–∞ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–∞ –≤ —Ö—É–∫–∏!
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ

‚úÖ Frontend —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫  
‚úÖ Frontend –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è (HTTP 200)  
‚úÖ –ò–º–ø–æ—Ä—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –≤ 2 —Ñ–∞–π–ª–∞—Ö  
‚úÖ –°—Ç–∞—Ä—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ –Ω–æ–≤—ã–π

### –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

‚è≥ –û—Ç–∫—Ä—ã—Ç–∏–µ OCR Editor –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ  
‚è≥ –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –±–ª–æ–∫–æ–≤  
‚è≥ –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –±–ª–æ–∫–æ–≤  
‚è≥ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –±–ª–æ–∫–æ–≤  
‚è≥ –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ OCR

---

## üìà –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –§–∞–∑–∞ 1 (—Ç–µ–∫—É—â–∞—è) - OCR Editor ‚úÖ

- [x] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –º–æ–¥—É–ª—è
- [x] –°–æ–∑–¥–∞—Ç—å API —Å–ª–æ–π
- [x] –°–æ–∑–¥–∞—Ç—å —Ö—É–∫–∏
- [x] –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- [x] –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã
- [x] –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å frontend
- [ ] **–ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ**

### –§–∞–∑–∞ 2 (—Å–ª–µ–¥—É—é—â–∞—è) - Service Manager

- [ ] –°–æ–∑–¥–∞—Ç—å `modules/admin/services/`
- [ ] –†–∞–∑–±–∏—Ç—å ServiceManager (605 —Å—Ç—Ä–æ–∫ ‚Üí 3 —Ñ–∞–π–ª–∞)
- [ ] –°–æ–∑–¥–∞—Ç—å —Ö—É–∫–∏ useServices
- [ ] –û–±—ä–µ–¥–∏–Ω–∏—Ç—å ServiceManager + ServiceManagerSimple

### –§–∞–∑–∞ 3 - Contact List

- [ ] –°–æ–∑–¥–∞—Ç—å `modules/contacts/`
- [ ] –†–∞–∑–±–∏—Ç—å ContactList (1079 —Å—Ç—Ä–æ–∫ ‚Üí 5 —Ñ–∞–π–ª–æ–≤)
- [ ] –°–æ–∑–¥–∞—Ç—å —Ö—É–∫–∏ useContacts, useContactFilters

### –§–∞–∑–∞ 4 - System Settings

- [ ] –°–æ–∑–¥–∞—Ç—å `modules/admin/settings/`
- [ ] –†–∞–∑–±–∏—Ç—å SystemSettings (603 —Å—Ç—Ä–æ–∫ ‚Üí 4 —Ñ–∞–π–ª–∞)

---

## üéì –í—ã–≤–æ–¥—ã

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ

‚úÖ **–ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** - –ª–µ–≥–∫–æ –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—ã–π –∫–æ–¥  
‚úÖ **–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ö—É–∫–∏** - –ª–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å  
‚úÖ **–ú–∞–ª–µ–Ω—å–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** - –ª–µ–≥–∫–æ —á–∏—Ç–∞—Ç—å  
‚úÖ **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** - —Ö—É–∫–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–µ–∑–¥–µ

### –ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å

‚ö†Ô∏è **–ù–µ–º–Ω–æ–≥–æ –±–æ–ª—å—à–µ —Å—Ç—Ä–æ–∫** (1150 ‚Üí 1329)
- –ü—Ä–∏—á–∏–Ω–∞: —ç–∫—Å–ø–æ—Ä—Ç—ã, –∏–º–ø–æ—Ä—Ç—ã, —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- –ù–æ: –∑–∞—Ç–æ –ª–µ–≥—á–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å

‚ö†Ô∏è **–ë–æ–ª—å—à–µ —Ñ–∞–π–ª–æ–≤** (1 ‚Üí 10)
- –ü—Ä–∏—á–∏–Ω–∞: –º–æ–¥—É–ª—å–Ω–æ—Å—Ç—å
- –ù–æ: –∑–∞—Ç–æ –ª–µ–≥—á–µ –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—ã–π –∫–æ–¥

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

‚úÖ **–ü—Ä–æ–¥–æ–ª–∂–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é** –ø–æ –ø–ª–∞–Ω—É  
‚úÖ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å** –ø–µ—Ä–µ–¥ –º–µ—Ä–¥–∂–µ–º  
‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è**

---

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### API —Å–ª–æ–π (ocrApi.js)

```javascript
export const getOCRBlocks = async (contactId) => { /* ... */ }
export const reprocessOCR = async (contactId, blocks) => { /* ... */ }
export const updateContactFromOCR = async (contactId, fields) => { /* ... */ }
```

### –•—É–∫–∏

**useOCRBlocks** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏
```javascript
const {
  blocks,           // –¢–µ–∫—É—â–∏–µ –±–ª–æ–∫–∏
  loading,          // –°—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏
  updateBlock,      // –û–±–Ω–æ–≤–∏—Ç—å –±–ª–æ–∫
  deleteBlock,      // –£–¥–∞–ª–∏—Ç—å –±–ª–æ–∫
  addBlock,         // –î–æ–±–∞–≤–∏—Ç—å –±–ª–æ–∫
  handleReprocess   // –ü–æ–≤—Ç–æ—Ä–∏—Ç—å OCR
} = useOCRBlocks(contact);
```

**useBlockDrag** - –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ
```javascript
const {
  handleDragStart,  // –ù–∞—á–∞—Ç—å –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ
  handleDrag,       // –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ
  handleDragEnd,    // –ó–∞–∫–æ–Ω—á–∏—Ç—å –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ
  isDragging        // –§–ª–∞–≥ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
} = useBlockDrag(blocks, updateBlock, imageScale);
```

**useBlockResize** - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞
```javascript
const {
  handleResizeStart,  // –ù–∞—á–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ
  handleResize,       // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞
  handleResizeEnd,    // –ó–∞–∫–æ–Ω—á–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ
  isResizing          // –§–ª–∞–≥ –∏–∑–º–µ–Ω–µ–Ω–∏—è
} = useBlockResize(blocks, updateBlock, imageScale);
```

---

## ‚úÖ –°—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–∏

**–§–∞–∑–∞ 1 - OCR Editor:** ‚úÖ **–ó–ê–í–ï–†–®–ï–ù–ê**

- –í—Ä–µ–º—è: ~2 —á–∞—Å–∞
- –°–ª–æ–∂–Ω–æ—Å—Ç—å: –°—Ä–µ–¥–Ω—è—è
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –£—Å–ø–µ—à–Ω–æ
- –û—à–∏–±–æ–∫: 0
- Frontend: –†–∞–±–æ—Ç–∞–µ—Ç

**–°–ª–µ–¥—É—é—â–∏–π –º–æ–¥—É–ª—å:** Service Manager (–§–∞–∑–∞ 2)

---

**–í–µ—Ä—Å–∏—è:** 2.21.4  
**–ê–≤—Ç–æ—Ä:** Cursor AI  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ OCR Editor –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ

