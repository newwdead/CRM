# Release Notes v2.12 - Automatic Duplicate Detection
**–î–∞—Ç–∞ —Ä–µ–ª–∏–∑–∞:** 21 –æ–∫—Ç—è–±—Ä—è 2025  
**–¢–∏–ø:** Major Feature Release

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### ‚ú® –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

#### 1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞**
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–∞
   - ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –≤ —Ç–∞–±–ª–∏—Ü—É `duplicate_contacts`
   - ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–∫–ª—é—á–µ–Ω–∏—è/–≤—ã–∫–ª—é—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ System Settings
   - ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –ø–æ—Ä–æ–≥ —Å—Ö–æ–∂–µ—Å—Ç–∏

#### 2. **–£–ª—É—á—à–µ–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤**
   - ‚úÖ **Weighted scoring**: —Ä–∞–∑–Ω—ã–µ –≤–µ—Å–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–æ–ª–µ–π
     - Email: 30% (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä)
     - Phone: 25% (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä)
     - Full Name: 20%
     - First/Last Name: 12-13%
     - Company: 8%
     - Position: 4%
   
   - ‚úÖ **–¢—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è Cyrillic ‚Üî Latin**
     - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ "–ò–≤–∞–Ω–æ–≤" ‚Üî "Ivanov"
     - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ä—É—Å—Å–∫–∏—Ö –±—É–∫–≤
     - –î–≤–æ–π–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ: –ø—Ä—è–º–æ–µ + —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ
   
   - ‚úÖ **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤**
     - –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –Ω–µ—Ü–∏—Ñ—Ä–æ–≤—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
     - –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–µ—Ñ–∏–∫—Å–æ–≤: 8‚Üí7, 9‚Üí79
     - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 7 —Ü–∏—Ñ—Ä (–¥–ª—è —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è)
     - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã—Ö –ø–æ–ª–µ–π (mobile, work, additional)
   
   - ‚úÖ **–£–º–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–π**
     - –ü–æ–ª–µ "name": fuzzy matching + —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è
     - –ü–æ–ª–µ "phone": –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è + —á–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
     - –ü–æ–ª–µ "email": —Ç–æ—á–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ
     - –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è: fuzzy matching

#### 3. **–†–∞–∑–¥–µ–ª "–î—É–±–ª–∏–∫–∞—Ç—ã" –≤ Admin Panel**
   - ‚úÖ –ù–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞ ‚ö†Ô∏è "Duplicates"
   - ‚úÖ –¢–∞–±–ª–∏—Ü–∞ –≤—Å–µ—Ö –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
   - ‚úÖ –§–∏–ª—å—Ç—Ä—ã:
     - –ü–æ —Å—Ç–∞—Ç—É—Å—É: All, Pending, Reviewed, Merged, Ignored
     - –ü–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Å—Ö–æ–∂–µ—Å—Ç–∏: 50%-100% (—Å–ª–∞–π–¥–µ—Ä)
   - ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:
     - –î–≤–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞ side-by-side —Å –¥–µ—Ç–∞–ª—è–º–∏
     - –ü—Ä–æ—Ü–µ–Ω—Ç —Å—Ö–æ–∂–µ—Å—Ç–∏ —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π (–∑–µ–ª–µ–Ω—ã–π >90%, –æ—Ä–∞–Ω–∂–µ–≤—ã–π >80%, —Å–∏–Ω–∏–π <80%)
     - –°–æ–≤–ø–∞–¥–∞—é—â–∏–µ –ø–æ–ª—è —Å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º–∏ –ø—Ä–æ—Ü–µ–Ω—Ç–∞–º–∏
     - –î–∞—Ç–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è
     - –ú–µ—Ç–∫–∞ "Auto" –∏–ª–∏ "Manual"
   
   - ‚úÖ –î–µ–π—Å—Ç–≤–∏—è:
     - **Merge** - –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ —á–µ—Ä–µ–∑ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
     - **Ignore** - –ø–æ–º–µ—Ç–∫–∞ –∫–∞–∫ –ª–æ–∂–Ω–æ–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ
     - –ö–Ω–æ–ø–∫–∞ "Find Duplicates" - —Ä—É—á–Ω–æ–π –ø–æ–∏—Å–∫ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
   
   - ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

#### 4. **–ù–æ–≤—ã–µ API Endpoints**
   - ‚úÖ `GET /api/contacts/{contact_id}/duplicates` - –ø–æ–ª—É—á–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞
   - ‚úÖ `POST /api/duplicates/{duplicate_id}/ignore` - –ø–æ–º–µ—Ç–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç –∫–∞–∫ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–π

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **Backend (`backend/app/duplicate_utils.py`)**:
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `transliterate_cyrillic_to_latin()` - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∫–∏—Ä–∏–ª–ª–∏—Ü—ã –≤ –ª–∞—Ç–∏–Ω–∏—Ü—É
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `normalize_phone()` - –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤
   - –£–ª—É—á—à–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `calculate_field_similarity()` —Å —Ç–∏–ø–∞–º–∏ –ø–æ–ª–µ–π ('name', 'phone', 'email', 'text')
   - –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `calculate_contact_similarity()` —Å weighted scoring –∏ cross-field phone matching
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `find_duplicates_for_new_contact()` - –ø–æ–∏—Å–∫ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –¥–ª—è –Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞

2. **Backend (`backend/app/main.py`)**:
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –≤ endpoint `POST /contacts/`
   - Try-catch –æ–±–µ—Ä—Ç–∫–∞ —á—Ç–æ–±—ã –æ—à–∏–±–∫–∏ –ø–æ–∏—Å–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –Ω–µ –ª–æ–º–∞–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞
   - –ù–æ–≤—ã–π endpoint `GET /api/contacts/{contact_id}/duplicates`
   - –ù–æ–≤—ã–π endpoint `POST /api/duplicates/{duplicate_id}/ignore`

3. **Frontend (`frontend/src/components/DuplicatesPanel.js`)**:
   - –ù–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (330 —Å—Ç—Ä–æ–∫) –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–∞–º–∏
   - –§–∏–ª—å—Ç—Ä—ã –ø–æ —Å—Ç–∞—Ç—É—Å—É –∏ —Å—Ö–æ–∂–µ—Å—Ç–∏
   - –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –ø—Ä–æ—Ü–µ–Ω—Ç–∞ —Å—Ö–æ–∂–µ—Å—Ç–∏
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `DuplicateMergeModal` –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è
   - Responsive —Ç–∞–±–ª–∏—Ü–∞ —Å overflow

4. **Frontend (`frontend/src/components/AdminPanel.js`)**:
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ "‚ö†Ô∏è Duplicates"
   - –ò–º–ø–æ—Ä—Ç –∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ `DuplicatesPanel`

### üìä –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –∫–æ–Ω—Ç–∞–∫—Ç
   ‚Üì
2. Backend —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–æ–Ω—Ç–∞–∫—Ç –≤ –ë–î
   ‚Üì
3. –ï—Å–ª–∏ duplicate_detection_enabled=true:
   ‚Üì
4. –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã
   ‚Üì
5. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è similarity score:
   - –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª–µ–π (lowercase, strip)
   - –¢—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è –¥–ª—è –∏–º–µ–Ω (Ivanov ‚Üî –ò–≤–∞–Ω–æ–≤)
   - –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ (—É–¥–∞–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
   - –í–∑–≤–µ—à–µ–Ω–Ω–æ–µ —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –ø–æ–ª–µ–π
   ‚Üì
6. –ï—Å–ª–∏ score >= threshold (default 0.75):
   ‚Üì
7. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ duplicate_contacts
   ‚Üì
8. –ê–¥–º–∏–Ω –≤–∏–¥–∏—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã –≤ Admin Panel ‚Üí Duplicates
   ‚Üì
9. –ê–¥–º–∏–Ω –º–æ–∂–µ—Ç:
   - –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã (Merge)
   - –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å (Ignore) - false positive
   - –í—Ä—É—á–Ω—É—é –Ω–∞–π—Ç–∏ –±–æ–ª—å—à–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ (Find Duplicates)
```

### üé® UX –£–ª—É—á—à–µ–Ω–∏—è

1. **–¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —Å—Ö–æ–∂–µ—Å—Ç–∏**:
   - üü¢ ‚â•90% - –ó–µ–ª–µ–Ω—ã–π (–æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –¥—É–±–ª–∏–∫–∞—Ç–∞)
   - üü† 80-89% - –û—Ä–∞–Ω–∂–µ–≤—ã–π (–≤—ã—Å–æ–∫–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å)
   - üîµ <80% - –°–∏–Ω–∏–π (—Å—Ä–µ–¥–Ω—è—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å)

2. **–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ badge –¥–ª—è —Å–æ–≤–ø–∞–¥–∞—é—â–∏—Ö –ø–æ–ª–µ–π**:
   - –ö–∞–∂–¥–æ–µ –ø–æ–ª–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–≤–æ–π –ø—Ä–æ—Ü–µ–Ω—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
   - –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è: –∑–µ–ª–µ–Ω–∞—è —Ä–∞–º–∫–∞ ‚â•90%, –æ—Ä–∞–Ω–∂–µ–≤–∞—è <90%

3. **–ö–æ–º–ø–∞–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤**:
   - –ò–º—è –∂–∏—Ä–Ω—ã–º —à—Ä–∏—Ñ—Ç–æ–º
   - Email, —Ç–µ–ª–µ—Ñ–æ–Ω, –∫–æ–º–ø–∞–Ω–∏—è —Å –∏–∫–æ–Ω–∫–∞–º–∏
   - –í—Å–µ –Ω–∞ –æ–¥–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ

### üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫

–ù–µ—Ç –Ω–æ–≤—ã—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π - —ç—Ç–æ feature release.

### üìù –ù–∞—Å—Ç—Ä–æ–π–∫–∏ System Settings

–ù–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "Duplicate Detection":
```
duplicate_detection_enabled (boolean, default: true)
  - –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ

duplicate_similarity_threshold (float, default: 0.75)
  - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ —Å—Ö–æ–∂–µ—Å—Ç–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–∞
  - –î–∏–∞–ø–∞–∑–æ–Ω: 0.0 (0%) - 1.0 (100%)

duplicate_check_frequency_hours (integer, default: 24)
  - –ß–∞—Å—Ç–æ—Ç–∞ —Ñ–æ–Ω–æ–≤–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ (–¥–ª—è –±—É–¥—É—â–∏—Ö —Ä–µ–ª–∏–∑–æ–≤)

duplicate_check_new_only (boolean, default: true)
  - –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã –∏–ª–∏ –≤—Å–µ
```

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞
- ‚úÖ –ê–ª–≥–æ—Ä–∏—Ç–º —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–µ–π
- ‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤
- ‚úÖ –†–∞–∑–¥–µ–ª Duplicates –≤ Admin Panel
- ‚úÖ –§–∏–ª—å—Ç—Ä—ã –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- ‚úÖ –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
- ‚úÖ –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π
- ‚úÖ –†—É—á–Ω–æ–π –ø–æ–∏—Å–∫ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

**–ü—Ä–∏–º–µ—Ä—ã —É—Å–ø–µ—à–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π:**
```
‚úÖ "–ò–≤–∞–Ω–æ–≤" = "Ivanov" (—Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è)
‚úÖ "+7 (999) 123-45-67" = "8 999 123 45 67" (–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞)
‚úÖ "–û–û–û –†–æ–º–∞—à–∫–∞" ‚âà "–û–û–û –†–û–ú–ê–®–ö–ê" (fuzzy matching + case insensitive)
‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤: phone, phone_mobile, phone_work, phone_additional
```

### üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
# 1. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git pull origin main

# 2. –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
docker compose exec db psql -U postgres -d bizcard_crm -c \
  "UPDATE system_settings SET category='Duplicate Detection' WHERE category='duplicates';"

# 3. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker compose up -d --build

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é
curl http://localhost:8000/version
# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: {"version": "v2.12", "message": "Automatic Duplicate Detection"}

# 5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ–æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ
# –°–æ–∑–¥–∞–π—Ç–µ –¥–≤–∞ –ø–æ—Ö–æ–∂–∏—Ö –∫–æ–Ω—Ç–∞–∫—Ç–∞ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ Admin Panel ‚Üí Duplicates
```

### üöß –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–û—Ç–ª–æ–∂–µ–Ω–æ –Ω–∞ v2.13:**
   - –§–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ Celery –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –¥—É–±–ª–∏–∫–∞—Ç–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
   - –ú–∞—Å—Å–æ–≤–æ–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ (–≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ + "Merge All")
   - Email-–æ—Ç—á–µ—Ç—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –¥—É–±–ª–∏–∫–∞—Ç–∞—Ö

2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
   - –ü—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ (>10,000) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–∂–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `duplicate_check_new_only=true`
   - –î–ª—è –ø–æ–ª–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É "Find Duplicates" –≤ Admin Panel

3. **–õ–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è:**
   - –ö–æ–Ω—Ç–∞–∫—Ç—ã —Å –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂–∏–º–∏ –∏–º–µ–Ω–∞–º–∏ –∏ –æ–¥–Ω–æ–π –∫–æ–º–ø–∞–Ω–∏–µ–π –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ –¥—É–±–ª–∏–∫–∞—Ç—ã
   - –†–µ—à–µ–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É "Ignore"

### üöÄ –ß—Ç–æ –¥–∞–ª—å—à–µ (v2.13)

–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è:
1. **–§–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ Celery**:
   - –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —á–µ—Ä–µ–∑ Admin Panel
   - –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

2. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏**:
   - Toast-—Å–æ–æ–±—â–µ–Ω–∏–µ: "–ù–∞–π–¥–µ–Ω –ø–æ—Ö–æ–∂–∏–π –∫–æ–Ω—Ç–∞–∫—Ç"
   - –ö–Ω–æ–ø–∫–∞ "–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å" ‚Üí –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –¥—É–±–ª–∏–∫–∞—Ç–∞–º–∏
   - –û–ø—Ü–∏—è "–û–±—ä–µ–¥–∏–Ω–∏—Ç—å —Å–µ–π—á–∞—Å"

3. **–ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏**:
   - –í—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
   - "Ignore All Selected"
   - "Merge All Selected" (–∞–≤—Ç–æ-–≤—ã–±–æ—Ä primary)

4. **–£–ª—É—á—à–µ–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–∞**:
   - Machine Learning –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö –≤–µ—Å–æ–≤
   - –û–±—É—á–µ–Ω–∏–µ –Ω–∞ –∏—Å—Ç–æ—Ä–∏–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–π
   - –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ—Ä–æ–≥ —Å—Ö–æ–∂–µ—Å—Ç–∏

5. **–≠–∫—Å–ø–æ—Ä—Ç –∏ –æ—Ç—á–µ—Ç—ã**:
   - –≠–∫—Å–ø–æ—Ä—Ç —Å–ø–∏—Å–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –≤ CSV
   - Email-–æ—Ç—á–µ—Ç—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
   - –ì—Ä–∞—Ñ–∏–∫ "–î—É–±–ª–∏–∫–∞—Ç—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü"

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–ê–ª–≥–æ—Ä–∏—Ç–º –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤](./docs/duplicate_detection.md) (coming soon)
- [API Reference –¥–ª—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤](./docs/api_duplicates.md) (coming soon)
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è](./docs/user_guide_duplicates.md) (coming soon)

### üéØ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

- **Backend:** +430 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
- **Frontend:** +450 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** +340 —Å—Ç—Ä–æ–∫
- **–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:** 2 (DuplicatesPanel.js, RELEASE_NOTES_v2.12.md)
- **–ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:** 4 (duplicate_utils.py, main.py, AdminPanel.js, docker-compose.yml)
- **–ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:** 4 (transliterate, normalize_phone, find_duplicates_for_new_contact, ignore_duplicate endpoint)
- **–ù–æ–≤—ã–µ endpoints:** 2 (GET /api/contacts/{id}/duplicates, POST /api/duplicates/{id}/ignore)

### üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –ü—Ä–∏–º–µ—Ä 1: –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞ —Å –∞–≤—Ç–æ–ø—Ä–æ–≤–µ—Ä–∫–æ–π
```bash
curl -X POST http://localhost:8000/contacts/ \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "full_name": "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω",
    "email": "ivanov@example.com",
    "phone": "+7 999 123 45 67",
    "company": "–û–û–û –†–æ–º–∞—à–∫–∞"
  }'

# –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç –≤ duplicate_contacts
```

#### –ü—Ä–∏–º–µ—Ä 2: –†—É—á–Ω–æ–π –ø–æ–∏—Å–∫ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
```bash
curl -X POST http://localhost:8000/api/duplicates/find?threshold=0.7 \
  -H "Authorization: Bearer $TOKEN"

# –í–µ—Ä–Ω–µ—Ç: {"message": "Found 26 potential duplicates", "found": 26, "saved": 26}
```

#### –ü—Ä–∏–º–µ—Ä 3: –ü–æ–ª—É—á–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞
```bash
curl http://localhost:8000/api/contacts/123/duplicates \
  -H "Authorization: Bearer $TOKEN"

# –í–µ—Ä–Ω–µ—Ç —Å–ø–∏—Å–æ–∫ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —Å –ø—Ä–æ—Ü–µ–Ω—Ç–∞–º–∏ —Å—Ö–æ–∂–µ—Å—Ç–∏
```

### üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

–°–ø–∞—Å–∏–±–æ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ibbase CRM! –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∏—Ç –∫–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö –≤ –≤–∞—à–µ–π –±–∞–∑–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤.

---

**–í–µ—Ä—Å–∏—è:** v2.12  
**Commit:** (–±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –ø—Ä–∏ —Ä–µ–ª–∏–∑–µ)  
**–ü—Ä–µ–¥—ã–¥—É—â–∞—è –≤–µ—Ä—Å–∏—è:** v2.11 - Duplicate Detection Foundation
**Docker Images:** 
- Backend: `ghcr.io/newwdead/crm-backend:v2.12`
- Frontend: `ghcr.io/newwdead/crm-frontend:v2.12`

**–£—á–∞—Å—Ç–Ω–∏–∫–∏:** AI Assistant
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** Manual testing + API testing
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready

