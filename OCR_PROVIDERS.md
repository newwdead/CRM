# üîç OCR –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û —Å–∏—Å—Ç–µ–º–µ](#–æ-—Å–∏—Å—Ç–µ–º–µ)
- [–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã](#–¥–æ—Å—Ç—É–ø–Ω—ã–µ-–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã)
- [–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π Fallback](#–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π-fallback)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
- [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ API](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-—á–µ—Ä–µ–∑-api)
- [–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤](#—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤)
- [Troubleshooting](#troubleshooting)

---

## üéØ –û —Å–∏—Å—Ç–µ–º–µ

BizCard CRM v1.6+ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—É—é —Å–∏—Å—Ç–µ–º—É OCR —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º fallback. –ï—Å–ª–∏ –æ–¥–∏–Ω –ø—Ä–æ–≤–∞–π–¥–µ—Ä –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª, —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ø—Ä–æ–±—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É.

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   OCRManager    ‚îÇ ‚Üê –£–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚ñº         ‚ñº         ‚ñº          ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇParsio‚îÇ  ‚îÇGoogle‚îÇ  ‚îÇTesser‚îÇ  ‚îÇFuture‚îÇ
‚îÇ      ‚îÇ  ‚îÇVision‚îÇ  ‚îÇ act  ‚îÇ  ‚îÇ ...  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
Priority 1  Priority 2  Priority 3
```

---

## üì¶ –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã

### 1. **Tesseract** (–õ–æ–∫–∞–ª—å–Ω—ã–π, –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π)

‚úÖ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π
- –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–≥–∏—Ö —è–∑—ã–∫–æ–≤ (—Ä—É—Å—Å–∫–∏–π + –∞–Ω–≥–ª–∏–π—Å–∫–∏–π)
- –ë—ã—Å—Ç—Ä—ã–π

‚ö†Ô∏è **–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –°—Ä–µ–¥–Ω—è—è —Ç–æ—á–Ω–æ—Å—Ç—å (–æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞ —Å–ª–æ–∂–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö)
- –¢—Ä–µ–±—É–µ—Ç –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –ú–æ–∂–µ—Ç –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å —Ä—É–∫–æ–ø–∏—Å–Ω—ã–π —Ç–µ–∫—Å—Ç

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** 3 (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–º)  
**–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å:** ~70%  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞:

```ini
# .env
TESSERACT_LANGS=eng+rus
```

Tesseract —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

---

### 2. **Parsio** (–û–±–ª–∞—á–Ω—ã–π, –ø–ª–∞—Ç–Ω—ã–π)

‚úÖ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
- –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ –æ–±—É—á–µ–Ω –¥–ª—è –≤–∏–∑–∏—Ç–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–ª–æ–∂–Ω—ã—Ö –º–∞–∫–µ—Ç–æ–≤

‚ö†Ô∏è **–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –¢—Ä–µ–±—É–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É (–ø–ª–∞—Ç–Ω—ã–π)
- –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- –ú–µ–¥–ª–µ–Ω–Ω–µ–µ —á–µ–º Tesseract

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** 1 (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º)  
**–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å:** ~90%  
**–°—Ç–∞—Ç—É—Å:** ‚öôÔ∏è –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞:

1. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ https://parsio.io/
2. –°–æ–∑–¥–∞–π—Ç–µ mailbox –¥–ª—è –≤–∏–∑–∏—Ç–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
3. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```ini
# .env
PARSIO_API_KEY=your_api_key_here
PARSIO_API_URL=https://api.parsio.io/mailboxes/<mailbox_id>/upload
PARSIO_DOCUMENT_URL_TEMPLATE=https://api.parsio.io/docs/{id}
PARSIO_AUTH_HEADER_NAME=X-API-Key
PARSIO_AUTH_HEADER_VALUE={key}
PARSIO_TIMEOUT=45
PARSIO_POLL_INTERVAL=2.0
PARSIO_POLL_MAX_ATTEMPTS=20
```

5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend:
```bash
docker compose restart backend
```

---

### 3. **Google Cloud Vision API** (–û–±–ª–∞—á–Ω—ã–π, –ø–ª–∞—Ç–Ω—ã–π)

‚úÖ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
- –û—Ç–ª–∏—á–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –ª—é–±—ã—Ö —è–∑—ã–∫–∞—Ö
- –•–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ä—É–∫–æ–ø–∏—Å–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º
- –ú–æ—â–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

‚ö†Ô∏è **–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –¢—Ä–µ–±—É–µ—Ç Google Cloud –∞–∫–∫–∞—É–Ω—Ç
- –ü–ª–∞—Ç–Ω—ã–π (–Ω–æ –µ—Å—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ª–∏–º–∏—Ç)
- –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ API

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** 2 (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—Ç–æ—Ä—ã–º)  
**–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å:** ~95%  
**–°—Ç–∞—Ç—É—Å:** ‚öôÔ∏è –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞:

1. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Google Cloud Console
2. –í–∫–ª—é—á–∏—Ç–µ Cloud Vision API
3. –°–æ–∑–¥–∞–π—Ç–µ API –∫–ª—é—á (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –ø–æ IP)
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```ini
# .env
GOOGLE_VISION_API_KEY=your_google_api_key_here
```

5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend:
```bash
docker compose restart backend
```

**–ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ https://console.cloud.google.com/
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
3. –í–∫–ª—é—á–∏—Ç–µ Cloud Vision API:
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "APIs & Services" ‚Üí "Library"
   - –ù–∞–π–¥–∏—Ç–µ "Cloud Vision API"
   - –ù–∞–∂–º–∏—Ç–µ "Enable"
4. –°–æ–∑–¥–∞–π—Ç–µ API –∫–ª—é—á:
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "APIs & Services" ‚Üí "Credentials"
   - –ù–∞–∂–º–∏—Ç–µ "Create Credentials" ‚Üí "API key"
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á
   - (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –∫–ª—é—á –ø–æ IP –∏ API
5. –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á –≤ `.env` —Ñ–∞–π–ª

---

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π Fallback

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–±—É–µ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞:

```
1Ô∏è‚É£ Parsio (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω) ‚Üí –≤—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
                ‚Üì (–µ—Å–ª–∏ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª)
2Ô∏è‚É£ Google Vision (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω) ‚Üí –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
                ‚Üì (–µ—Å–ª–∏ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª)
3Ô∏è‚É£ Tesseract (–≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–µ–Ω) ‚Üí —Å—Ä–µ–¥–Ω—è—è —Ç–æ—á–Ω–æ—Å—Ç—å
```

### –ö–æ–≥–¥–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç fallback?

- –ü—Ä–æ–≤–∞–π–¥–µ—Ä –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–Ω–µ—Ç API –∫–ª—é—á–∞)
- –°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞
- –û—à–∏–±–∫–∞ API (rate limit, timeout)
- –ü—Ä–æ–≤–∞–π–¥–µ—Ä –Ω–µ —Å–º–æ–≥ –∏–∑–≤–ª–µ—á—å –¥–∞–Ω–Ω—ã–µ

### –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã

```
üì∏ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤–∏–∑–∏—Ç–∫—É

üîç OCRManager –ø—Ä–æ–±—É–µ—Ç Parsio...
   ‚ùå –û—à–∏–±–∫–∞: rate limit exceeded

üîç OCRManager –ø—Ä–æ–±—É–µ—Ç Google Vision...
   ‚ùå –ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–Ω–µ—Ç API –∫–ª—é—á–∞)

üîç OCRManager –ø—Ä–æ–±—É–µ—Ç Tesseract...
   ‚úÖ –£—Å–ø–µ—à–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–æ!

üìä –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π:
   Provider: Tesseract
   Confidence: 0.70
```

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –†–µ–∂–∏–º 'auto' (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–∂–∏–º `auto` - —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –ª—É—á—à–∏–π –¥–æ—Å—Ç—É–ø–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä:

```bash
# –ß–µ—Ä–µ–∑ API
curl -X POST http://localhost:8000/upload/ \
  -F "file=@card.jpg" \
  -F "provider=auto"

# –ß–µ—Ä–µ–∑ Telegram –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
curl -X PUT http://localhost:8000/settings/telegram \
  -H "Content-Type: application/json" \
  -d '{"enabled": true, "provider": "auto"}'
```

### –í—ã–±–æ—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

–ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä:

```bash
# Tesseract
curl -X POST http://localhost:8000/upload/ \
  -F "file=@card.jpg" \
  -F "provider=tesseract"

# Parsio
curl -X POST http://localhost:8000/upload/ \
  -F "file=@card.jpg" \
  -F "provider=parsio"

# Google Vision
curl -X POST http://localhost:8000/upload/ \
  -F "file=@card.jpg" \
  -F "provider=google"
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª, —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–π–¥–µ—Ç –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É.

---

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ API

### –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

```bash
GET /ocr/providers
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "available": ["Tesseract", "Parsio", "Google Vision"],
  "details": [
    {
      "name": "Parsio",
      "priority": 1,
      "available": true
    },
    {
      "name": "Google Vision",
      "priority": 2,
      "available": false
    },
    {
      "name": "Tesseract",
      "priority": 3,
      "available": true
    }
  ]
}
```

### –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–∑–∏—Ç–∫—É —Å OCR

```bash
POST /upload/?provider=auto
Content-Type: multipart/form-data

file: <binary image>
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": 123,
  "full_name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  "company": "–û–û–û –ö–æ–º–ø–∞–Ω–∏—è",
  "email": "ivan@company.ru",
  "phone": "+7 (123) 456-78-90",
  "ocr_provider": "Parsio",
  "ocr_confidence": 0.9
}
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram

```bash
# –ü–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
GET /settings/telegram

# –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
PUT /settings/telegram
Content-Type: application/json

{
  "enabled": true,
  "token": "bot_token",
  "allowed_chats": "123,456",
  "provider": "auto"
}
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

| –ü–∞—Ä–∞–º–µ—Ç—Ä | Tesseract | Parsio | Google Vision |
|----------|-----------|--------|---------------|
| **–¶–µ–Ω–∞** | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ | $19+/–º–µ—Å | $1.50/1000 –∑–∞–ø—Ä–æ—Å–æ–≤* |
| **–¢–æ—á–Ω–æ—Å—Ç—å** | 70% | 90% | 95% |
| **–°–∫–æ—Ä–æ—Å—Ç—å** | –ë—ã—Å—Ç—Ä–æ | –°—Ä–µ–¥–Ω–µ | –ë—ã—Å—Ç—Ä–æ |
| **–ò–Ω—Ç–µ—Ä–Ω–µ—Ç** | –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è | –¢—Ä–µ–±—É–µ—Ç—Å—è | –¢—Ä–µ–±—É–µ—Ç—Å—è |
| **–Ø–∑—ã–∫–∏** | –ú–Ω–æ–≥–æ | –ú–Ω–æ–≥–æ | –í—Å–µ |
| **–†—É–∫–æ–ø–∏—Å–Ω—ã–π —Ç–µ–∫—Å—Ç** | –ü–ª–æ—Ö–æ | –•–æ—Ä–æ—à–æ | –û—Ç–ª–∏—á–Ω–æ |
| **–°–ª–æ–∂–Ω—ã–µ –º–∞–∫–µ—Ç—ã** | –°—Ä–µ–¥–Ω–µ | –û—Ç–ª–∏—á–Ω–æ | –û—Ç–ª–∏—á–Ω–æ |
| **–ù–∞—Å—Ç—Ä–æ–π–∫–∞** | –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è | –°—Ä–µ–¥–Ω—è—è | –°—Ä–µ–¥–Ω—è—è |
| **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç** | 3 (–ø–æ—Å–ª–µ–¥–Ω–∏–π) | 1 (–ø–µ—Ä–≤—ã–π) | 2 |

\* Google Vision: –ø–µ—Ä–≤—ã–µ 1000 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–µ—Å—è—Ü –±–µ—Å–ø–ª–∞—Ç–Ω–æ

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –≤—ã–±–æ—Ä—É

**–î–ª—è development:**
- ‚úÖ Tesseract - –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–î–ª—è production (–º–∞–ª—ã–π –æ–±—ä–µ–º):**
- ‚úÖ Tesseract + Google Vision (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ª–∏–º–∏—Ç)

**–î–ª—è production (–±–æ–ª—å—à–æ–π –æ–±—ä–µ–º):**
- ‚úÖ Parsio + Tesseract (fallback)
- ‚úÖ Google Vision + Tesseract (fallback)

**–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å:**
- ‚úÖ Parsio ‚Üí Google Vision ‚Üí Tesseract (auto —Ä–µ–∂–∏–º)

---

## üêõ Troubleshooting

### –ü—Ä–æ–≤–∞–π–¥–µ—Ä –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
```bash
curl http://localhost:8000/ocr/providers
```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```bash
docker compose exec backend env | grep -E "PARSIO|GOOGLE"
```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
```bash
docker compose logs backend | grep OCR
```

### Parsio –æ—à–∏–±–∫–∏

**403 Forbidden:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞

**404 Not Found:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `PARSIO_API_URL` (–¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å mailbox ID)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `PARSIO_DOCUMENT_URL_TEMPLATE`

**Rate limit:**
- –£–≤–µ–ª–∏—á—å—Ç–µ —Ç–∞—Ä–∏—Ñ–Ω—ã–π –ø–ª–∞–Ω Parsio
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ fallback –Ω–∞ –¥—Ä—É–≥–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã

### Google Vision –æ—à–∏–±–∫–∏

**403 Forbidden:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Cloud Vision API –≤–∫–ª—é—á–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∫–ª—é—á–∞ (IP, API)

**429 Too Many Requests:**
- –í—ã –ø—Ä–µ–≤—ã—Å–∏–ª–∏ –ª–∏–º–∏—Ç (1000 –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤/–º–µ—Å—è—Ü)
- –í–∫–ª—é—á–∏—Ç–µ –±–∏–ª–ª–∏–Ω–≥ –≤ Google Cloud

**Billing not enabled:**
- –í–∫–ª—é—á–∏—Ç–µ –±–∏–ª–ª–∏–Ω–≥ –≤ Google Cloud Console
- –ù–æ –ø–µ—Ä–≤—ã–µ 1000 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤—Å–µ —Ä–∞–≤–Ω–æ –±–µ—Å–ø–ª–∞—Ç–Ω—ã!

### –í—Å–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Tesseract —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
docker compose exec backend tesseract --version

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —è–∑—ã–∫–∏
docker compose exec backend tesseract --list-langs

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å: eng, rus

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker compose build backend
docker compose restart backend
```

---

## üí° –°–æ–≤–µ—Ç—ã –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –î–ª—è –ª—É—á—à–µ–π —Ç–æ—á–Ω–æ—Å—Ç–∏

1. **–ö–∞—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—ã—Å–æ–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ (–º–∏–Ω–∏–º—É–º 1000px)
   - –•–æ—Ä–æ—à–µ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ
   - –ú–∏–Ω–∏–º—É–º —Ç–µ–Ω–µ–π –∏ –±–ª–∏–∫–æ–≤

2. **–§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞:**
   - JPEG –∏–ª–∏ PNG
   - –ò–∑–±–µ–≥–∞–π—Ç–µ —Å–∏–ª—å–Ω–æ–≥–æ —Å–∂–∞—Ç–∏—è

3. **–í—ã–±–æ—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞:**
   - –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –≤–∏–∑–∏—Ç–æ–∫ ‚Üí Parsio –∏–ª–∏ Google Vision
   - –î–ª—è –ø—Ä–æ—Å—Ç—ã—Ö ‚Üí Tesseract –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ

### –î–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Å—Ä–µ–¥—Å—Ç–≤

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∂–∏–º 'auto':**
   - Parsio/Google —Å—Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ Tesseract –Ω–µ —Å–º–æ–≥

2. **Tesseract –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞:**
   - –ë—ã—Å—Ç—Ä–æ –∏ –±–µ—Å–ø–ª–∞—Ç–Ω–æ
   - –ó–∞—Ç–µ–º –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ premium –ø—Ä–æ–≤–∞–π–¥–µ—Ä

3. **Google Vision:**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ª–∏–º–∏—Ç (1000/–º–µ—Å)
   - –í–∫–ª—é—á–∞–π—Ç–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–∞–∂–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Parsio Documentation](https://parsio.io/docs/)
- [Google Cloud Vision API](https://cloud.google.com/vision/docs)
- [Tesseract Documentation](https://tesseract-ocr.github.io/)

---

**–ì–æ—Ç–æ–≤–æ! OCR –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ —Ä–∞–±–æ—Ç–µ! üéâ**

