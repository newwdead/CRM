# –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–±—É—á–µ–Ω–∏–µ OCR –≤ ibbase

**–î–∞—Ç–∞:** 21 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** v2.10  
**–°—Ç–∞—Ç—É—Å:** üìñ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

---

## üéØ –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ ibbase –≤–∫–ª—é—á–∞–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º –æ–±—É—á–µ–Ω–∏—è OCR, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç **—É–ª—É—á—à–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è** —Ç–µ–∫—Å—Ç–∞ —Å –≤–∏–∑–∏—Ç–æ–∫ –ø—É—Ç—ë–º —Å–±–æ—Ä–∞ –∏ –∞–Ω–∞–ª–∏–∑–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

---

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. **–ü—Ä–æ—Ü–µ—Å—Å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –≤–∏–∑–∏—Ç–∫–∏**

```
üì∑ –§–æ—Ç–æ –≤–∏–∑–∏—Ç–∫–∏
    ‚Üì
ü§ñ OCR (Tesseract/API)
    ‚Üì
üìù –ò–∑–≤–ª–µ—á—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (—Ç–µ–∫—Å—Ç + –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã)
    ‚Üì
üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
```

### 2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ**

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç **OCR —Ä–µ–¥–∞–∫—Ç–æ—Ä —Å –±–ª–æ–∫–∞–º–∏** (`üìù OCR` –∫–Ω–æ–ø–∫–∞ –≤ —Å–ø–∏—Å–∫–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤), —Å–∏—Å—Ç–µ–º–∞:

1. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç **–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–∏–∑–∏—Ç–∫–∏** —Å **bounding boxes** (—Ä–∞–º–∫–∞–º–∏) –≤–æ–∫—Ä—É–≥ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã—Ö –±–ª–æ–∫–æ–≤ —Ç–µ–∫—Å—Ç–∞
2. –ü–æ–∑–≤–æ–ª—è–µ—Ç **–≤—ã–±—Ä–∞—Ç—å –±–ª–æ–∫** –∏ **–∏–∑–º–µ–Ω–∏—Ç—å –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ**
3. –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
   - –û–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞
   - **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫—É** –≤ —Ç–∞–±–ª–∏—Ü—É `ocr_corrections`

### 3. **–ß—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏**

```python
{
    "contact_id": 123,                    # ID –∫–æ–Ω—Ç–∞–∫—Ç–∞
    "original_text": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤–∏—á",     # –ß—Ç–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–ª OCR
    "corrected_text": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",      # –ß—Ç–æ –≤–≤—ë–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    "field_name": "full_name",            # –í –∫–∞–∫–æ–µ –ø–æ–ª–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–æ
    "bbox": [100, 200, 300, 250],         # –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –±–ª–æ–∫–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏
    "confidence": 0.89,                   # –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å OCR (0-1)
    "created_at": "2025-10-21T10:30:00"  # –í—Ä–µ–º—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
}
```

### 4. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –æ–±—É—á–µ–Ω–∏—è**

#### **–ú–µ—Ç–æ–¥—ã —É–ª—É—á—à–µ–Ω–∏—è OCR:**

##### A) **–°–ª–æ–≤–∞—Ä—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π**
- –°–∏—Å—Ç–µ–º–∞ —Å–æ–±–∏—Ä–∞–µ—Ç –ø–∞—Ä—ã `original_text` ‚Üí `corrected_text`
- –ü—Ä–∏ –Ω–æ–≤–æ–º —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–µ—Ç –ª–∏ –ø–æ—Ö–æ–∂–µ–≥–æ —Ç–µ–∫—Å—Ç–∞ –≤ —Å–ª–æ–≤–∞—Ä–µ
- –ï—Å–ª–∏ –Ω–∞—Ö–æ–¥–∏—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ ‚â• 80%, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

```python
# –ü—Ä–∏–º–µ—Ä
–°–ª–æ–≤–∞—Ä—å: {"–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤–∏—á" ‚Üí "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤"}
–ù–æ–≤–∞—è –≤–∏–∑–∏—Ç–∫–∞: OCR —Ä–∞—Å–ø–æ–∑–Ω–∞–ª "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤–∏—á"
–°–∏—Å—Ç–µ–º–∞: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–º–µ–Ω—è–µ—Ç –Ω–∞ "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤"
```

##### B) **–û–±—É—á–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏**
- –ê–Ω–∞–ª–∏–∑ –≥–¥–µ –æ–±—ã—á–Ω–æ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –∏–º–µ–Ω–∞, –¥–æ–ª–∂–Ω–æ—Å—Ç–∏, —Ç–µ–ª–µ—Ñ–æ–Ω—ã
- –ï—Å–ª–∏ –±–ª–æ–∫ —Ç–µ–∫—Å—Ç–∞ –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö [100-300, 50-100], —ç—Ç–æ —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ **–∏–º—è**
- –ï—Å–ª–∏ –±–ª–æ–∫ –≤ [100-300, 300-350], —ç—Ç–æ —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ **—Ç–µ–ª–µ—Ñ–æ–Ω**

##### C) **Fine-tuning Tesseract (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**
- –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ traineddata —Ñ–∞–π–ª–∞
- –û–±—É—á–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π (—Ç—Ä–µ–±—É–µ—Ç >= 100 –ø—Ä–∏–º–µ—Ä–æ–≤)
- –ü—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º

---

## üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –æ–±—É—á–µ–Ω–∏—è

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç —É–≤–∏–¥–µ—Ç—å:
- –°–∫–æ–ª—å–∫–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ
- –ö–∞–∫–∏–µ –ø–æ–ª—è —á–∞—â–µ –≤—Å–µ–≥–æ –∏—Å–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
- –°–∞–º—ã–µ —á–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ OCR

```bash
# API endpoint
GET /api/ocr-corrections/stats

# –û—Ç–≤–µ—Ç
{
  "total_corrections": 45,
  "by_field": {
    "full_name": 12,
    "company": 8,
    "phone": 15,
    "email": 10
  },
  "top_errors": [
    {"original": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤–∏—á", "corrected": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤", "count": 3}
  ]
}
```

---

## üîß –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—É—á–µ–Ω–∏–µ OCR

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

1. **–û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç** —Å –≤–∏–∑–∏—Ç–∫–æ–π
2. –ù–∞–∂–∞—Ç—å **üìù OCR** –≤ —Å–ø–∏—Å–∫–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
3. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ** –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
4. –ù–∞–∂–∞—Ç—å **‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å**
5. –ì–æ—Ç–æ–≤–æ! –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:

#### 1. –ü—Ä–æ—Å–º–æ—Ç—Ä –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```bash
# SSH –Ω–∞ —Å–µ—Ä–≤–µ—Ä
ssh ubuntu@ibbase.ru

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
docker compose exec db psql -U postgres -d bizcard_crm

# –ó–∞–ø—Ä–æ—Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
SELECT field_name, COUNT(*) as corrections_count
FROM ocr_corrections
GROUP BY field_name
ORDER BY corrections_count DESC;
```

#### 2. –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ–±—É—á–µ–Ω–∏—è

```bash
# API endpoint
GET /api/ocr-corrections/export

# –°–∫–∞—á–∏–≤–∞–µ—Ç JSON —Ñ–∞–π–ª —Å–æ –≤—Å–µ–º–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏
```

#### 3. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –æ–±—É—á–µ–Ω–∏—è (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –Ω–æ–≤–æ–º —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–∏.

#### 4. –†—É—á–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ Tesseract (–ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ)

```bash
# –¢—Ä–µ–±—É–µ—Ç—Å—è >= 100 –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
# –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–±—É—á–µ–Ω–∏—è
docker compose exec backend python -m app.train_tesseract

# –ü—Ä–æ—Ü–µ—Å—Å –∑–∞–π–º—ë—Ç 10-30 –º–∏–Ω—É—Ç
# –ù–æ–≤—ã–π traineddata —Ñ–∞–π–ª –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –∏ –ø—Ä–∏–º–µ–Ω—ë–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

---

## üéì Label Studio –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –ß—Ç–æ —ç—Ç–æ?

**Label Studio** - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ä—É—á–Ω–æ–π —Ä–∞–∑–º–µ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö, –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤ ibbase.

### –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

1. **–û—Ç–∫—Ä—ã—Ç—å Label Studio:**
   - URL: https://ibbase.ru:8081
   - –õ–æ–≥–∏–Ω: admin@ibbase.ru
   - –ü–∞—Ä–æ–ª—å: admin

2. **–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç:**
   - –¢–∏–ø: Image Classification + OCR
   - –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–∑–∏—Ç–∫–∏

3. **–†–∞–∑–º–µ—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ:**
   - –ù–∞—Ä–∏—Å–æ–≤–∞—Ç—å bounding boxes –≤–æ–∫—Ä—É–≥ —Ç–µ–∫—Å—Ç–∞
   - –£–∫–∞–∑–∞—Ç—å —Ç–∏–ø –ø–æ–ª—è (–∏–º—è, —Ç–µ–ª–µ—Ñ–æ–Ω, email –∏ —Ç.–¥.)
   - –í–≤–µ—Å—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç

4. **–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ç–∫—É:**
   - Format: JSON
   - –§–∞–π–ª –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –æ–±—É—á–µ–Ω–∏—è

5. **–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫ Tesseract:**
   ```bash
   docker compose exec backend python -m app.import_labels --file /path/to/labels.json
   ```

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ OCR

### –¢–µ–∫—É—â–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | Tesseract | Google Vision API | Parsio API |
|---------|-----------|-------------------|------------|
| –¢–æ—á–Ω–æ—Å—Ç—å –∏–º—ë–Ω | 75-85% | 90-95% | 85-90% |
| –¢–æ—á–Ω–æ—Å—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ | 85-90% | 95-98% | 90-95% |
| –¢–æ—á–Ω–æ—Å—Ç—å email | 80-85% | 92-96% | 88-92% |
| –°–∫–æ—Ä–æ—Å—Ç—å | 2-3 —Å–µ–∫ | 1-2 —Å–µ–∫ | 3-5 —Å–µ–∫ |
| –°—Ç–æ–∏–º–æ—Å—Ç—å | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ | $1.50/1000 | $0.01/–≤–∏–∑–∏—Ç–∫–∞ |

### –£–ª—É—á—à–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ–±—É—á–µ–Ω–∏—è

–ü–æ—Å–ª–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è **100+** –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –æ–±—É—á–µ–Ω–∏—è:

```
Tesseract (–¥–æ):  75% —Ç–æ—á–Ω–æ—Å—Ç—å –∏–º—ë–Ω
Tesseract (–ø–æ—Å–ª–µ): 82-88% —Ç–æ—á–Ω–æ—Å—Ç—å –∏–º—ë–Ω (+7-13%)

–û–±—â–µ–µ —É–ª—É—á—à–µ–Ω–∏–µ: +5-15% –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª–µ–π
```

---

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–¢–∞–±–ª–∏—Ü–∞:** `ocr_corrections`

```sql
CREATE TABLE ocr_corrections (
    id SERIAL PRIMARY KEY,
    contact_id INTEGER REFERENCES contacts(id),
    original_text TEXT,
    corrected_text TEXT,
    field_name VARCHAR(100),
    bbox JSON,  -- [x, y, width, height]
    confidence FLOAT,
    created_at TIMESTAMP DEFAULT NOW()
);
```

### API Endpoints

```python
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
POST /api/contacts/{contact_id}/ocr-corrections
Body: {
  "original_text": "...",
  "corrected_text": "...",
  "field_name": "...",
  "bbox": [...]
}

# –ü–æ–ª—É—á–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –∫–æ–Ω—Ç–∞–∫—Ç–∞
GET /api/contacts/{contact_id}/ocr-corrections

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
GET /api/ocr-corrections/stats

# –≠–∫—Å–ø–æ—Ä—Ç –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
GET /api/ocr-corrections/export
```

### –ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

```python
def apply_corrections(ocr_text, field_name, bbox):
    """–ü—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫ –Ω–æ–≤–æ–º—É —Ç–µ–∫—Å—Ç—É"""
    
    # 1. –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
    correction = db.query(OCRCorrection).filter_by(
        original_text=ocr_text,
        field_name=field_name
    ).first()
    if correction:
        return correction.corrected_text
    
    # 2. –ü–æ—Ö–æ–∂–∏–π —Ç–µ–∫—Å—Ç (>= 80% —Å—Ö–æ–¥—Å—Ç–≤–∞)
    similar = db.query(OCRCorrection).filter(
        OCRCorrection.field_name == field_name
    ).all()
    
    for corr in similar:
        similarity = fuzz.ratio(ocr_text, corr.original_text)
        if similarity >= 80:
            return corr.corrected_text
    
    # 3. –ü–æ–∑–∏—Ü–∏–æ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å
    # –ï—Å–ª–∏ bbox –ø–æ—Ö–æ–∂ –Ω–∞ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –ø–æ–ª–µ–π
    if field_name == 'full_name' and is_name_position(bbox):
        return apply_name_rules(ocr_text)
    
    # 4. –í–æ–∑–≤—Ä–∞—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª–∞, –µ—Å–ª–∏ –Ω–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
    return ocr_text
```

---

## üéØ –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

1. **–ò—Å–ø—Ä–∞–≤–ª—è–π—Ç–µ –∫–∞–∂–¥—É—é –æ—à–∏–±–∫—É** - –¥–∞–∂–µ –º–µ–ª–∫–∏–µ –æ–ø–µ—á–∞—Ç–∫–∏ –ø–æ–º–æ–≥–∞—é—Ç –æ–±—É—á–µ–Ω–∏—é
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ OCR —Ä–µ–¥–∞–∫—Ç–æ—Ä** –≤–º–µ—Å—Ç–æ —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ - —ç—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
3. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –≤—Å–µ –ø–æ–ª—è** - –Ω–µ —Ç–æ–ª—å–∫–æ —Ç–µ, —á—Ç–æ —è–≤–Ω–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:

1. **–†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É** - `/api/ocr-corrections/stats`
2. **–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü** - –¥–ª—è –±—ç–∫–∞–ø–∞
3. **–ó–∞–ø—É—Å–∫–∞–π—Ç–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ** –ø—Ä–∏ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–∏ >= 100 –Ω–æ–≤—ã—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
4. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ** - —Å—Ä–∞–≤–Ω–∏–≤–∞–π—Ç–µ —Ç–æ—á–Ω–æ—Å—Ç—å –¥–æ/–ø–æ—Å–ª–µ –æ–±—É—á–µ–Ω–∏—è

---

## ‚ùì FAQ

**Q: –ö–∞–∫ –±—ã—Å—Ç—Ä–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è?**  
A: –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ. –°–ª–µ–¥—É—é—â–∞—è –≤–∏–∑–∏—Ç–∫–∞ —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

**Q: –ù—É–∂–Ω–æ –ª–∏ —á—Ç–æ-—Ç–æ –¥–µ–ª–∞—Ç—å –≤—Ä—É—á–Ω—É—é?**  
A: –ù–µ—Ç, —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è. –†—É—á–Ω–æ–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ Tesseract –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ.

**Q: –°–∫–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –¥–ª—è –≤–∏–¥–∏–º–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞?**  
A: –ü–µ—Ä–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –≤–∏–¥–Ω—ã –ø–æ—Å–ª–µ 20-30 –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π. –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ - –ø–æ—Å–ª–µ 100+.

**Q: –ú–æ–∂–Ω–æ –ª–∏ —É–¥–∞–ª–∏—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è?**  
A: –î–∞, —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –∏–ª–∏ –Ω–∞–ø—Ä—è–º—É—é –≤ –ë–î.

**Q: –í–ª–∏—è–µ—Ç –ª–∏ –æ–±—É—á–µ–Ω–∏–µ –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è?**  
A: –ù–µ—Ç, –¥–æ–±–∞–≤–ª—è–µ—Ç < 100–º—Å –Ω–∞ –≤–∏–∑–∏—Ç–∫—É.

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- **OCR Editor Guide:** [OCR_MULTISELECT_GUIDE.md](./OCR_MULTISELECT_GUIDE.md)
- **Label Studio Setup:** –†–∞–∑–¥–µ–ª –≤ [README.md](./README.md)
- **API Documentation:** Swagger UI –Ω–∞ `/docs`

---

**–ê–≤—Ç–æ—Ä:** AI Assistant  
**–û–±–Ω–æ–≤–ª–µ–Ω–æ:** 21 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0

